/*------------------------------------------------------
 Company:           Valentys Ltda.
 Author:            David Gaete <dmunozgaete@gmail.com> (https://github.com/dmunozgaete)
 
 Description:       Angular Material Components for Angular Gale
 Github:            https://github.com/dmunozgaete/angular-gale-material

 Versión:           1.0.0-rc.7
 Build Date:        2016-03-18 15:46:54
------------------------------------------------------*/


angular.module("gale-material.templates",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("gale-datepicker/gale-datepicker-dialog.tpl.html",'<md-dialog aria-label=dd class="gale-datepicker-dialog {{config.classToAdd}}"><md-dialog-content><div layout=row><div flex class="md-primary background resume" layout=column><div class=day flex=initial>{{data.selected | amDateFormat: \'dddd\'}}</div><div flex layout=column layout-align="center center" layout-fill><div class=month>{{data.selected | amDateFormat: \'MMMM\'}}</div><div class=day>{{data.selected | amDateFormat: \'D\'}}</div><div class=year>{{data.selected | amDateFormat: \'YYYY\'}}</div></div></div><div flex layout=column><div class=header flex=initial layout=row layout-align="center center"><div flex=15 layout=row layout-align="center center"><md-icon ng-click=previousMonth(data.selected); md-svg-icon=navigation:chevron_left class="md-primary text"></md-icon></div><div flex layout=row layout-align="center center" class=month>{{data.selected | amDateFormat: \'MMMM YYYY\'}}</div><div flex=15 layout=row layout-align="center center"><md-icon ng-click=nextMonth(data.selected); md-svg-icon=navigation:chevron_right class="md-primary text"></md-icon></div></div><md-calendar ng-model=data.selected></md-calendar></div></div></md-dialog-content><md-dialog-actions layout=row><md-button type=button class=md-accent ng-click=today()>Hoy</md-button><span flex></span><md-button type=button ng-click=cancel()>Cancelar</md-button><md-button type=button class="md-raised md-primary" ng-click=save(data.selected)>Aceptar</md-button></md-dialog-actions></md-dialog>'),$templateCache.put("gale-datepicker/gale-datepicker.tpl.html","<input readonly ng-disabled=disabled ng-if=!data.displayValue ng-click=show()> <input readonly ng-disabled=disabled ng-if=data.displayValue value={{data.displayValue}} ng-click=show()>"),$templateCache.put("gale-finder/directives/galeFinder.tpl.html",'<div class=finder><div class="close md-primary background" ng-click=close()><md-icon md-svg-icon=navigation:close></md-icon></div><table><tr><td class=icon><md-icon md-svg-icon=action:search></md-icon></td><td class=box><input ng-change=search(query) ng-model=query placeholder="{{placeholder}}"></td></tr></table><div ng-if=results class=results><div ng-repeat="item in results" ng-click=select(item) layout=row ng-mouseenter="activeIndex = $index" ng-mouseleave="activeIndex = -1" ng-class="{\'active\': $index == activeIndex}" layout-align="start center"><div flex=5 class=icon><div class=thumb><img ng-src="{{item.icon}}"></div></div><div flex class=name>{{item.name}}<div class=type>{{item.type}}</div></div></div></div><div ng-if="results && results.length > 0" class=footer>{{results.length}} resultados</div></div>'),$templateCache.put("gale-loading/directives/galeLoading.tpl.html",'<gale-center class="layout-row layout-align-start-center"><md-progress-circular class=md-hue-2 md-mode=indeterminate></md-progress-circular><gale-text></gale-text></gale-center>'),$templateCache.put("gale-select/gale-collection-dialog.tpl.html",'<md-dialog aria-label=dd class="gale-collection-dialog {{config.classToAdd}}"><md-toolbar><div class=md-toolbar-tools><h2>{{config.title}}</h2><span flex></span><md-button class=md-icon-button ng-click=cancel()><md-icon md-svg-icon=content:clear aria-label=Cancelar></md-icon></md-button></div></md-toolbar><md-dialog-content><center ng-if=!data.collection><br><br><br><md-progress-circular md-mode=indeterminate></md-progress-circular><flex-loading layout-fill title="Cargando Colección... " legend="espera..., solo un poco mas"></flex-loading></center><gale-collection-dialog-items></gale-collection-dialog-items></md-dialog-content><md-dialog-actions layout=row><span flex ng-if=data.collection>{{data.collection.length}} items disponibles</span><md-button type=button ng-click=cancel()>Cancelar</md-button></md-dialog-actions></md-dialog>'),$templateCache.put("gale-select/gale-select.tpl.html",'<input readonly ng-disabled=disabled ng-if=!data.displayValue ng-click=show()> <input readonly ng-disabled=disabled ng-if=data.displayValue value={{data.displayValue}} ng-click=show()><md-icon ng-if=!disabled md-svg-icon=navigation:arrow_drop_down class="md-primary text"></md-icon><select-template ng-transclude></select-template>'),$templateCache.put("gale-table/galeFilterContainer.tpl.html",'<md-menu><md-button aria-label=filter class=md-icon-button ng-click="openMenu($mdOpenMenu, $event)"><md-icon md-menu-origin md-svg-icon=content:filter_list></md-icon></md-button><md-menu-content width=4 class="gale-filter-container popup" ng-transclude></md-menu-content></md-menu>'),$templateCache.put("gale-table/galeTable.tpl.html",'<gale-header class=gale-header layout=row layout-align="start center" ng-transclude></gale-header><div class=loading ng-if=isLoading><md-progress-linear md-mode=indeterminate></md-progress-linear></div><gale-body class=gale-body><gale-row layout=row class=gale-row ng-click=onRowClick(item) layout-align="start center" ng-repeat="item in source track by $index" x={{$index}}><gale-cell ng-repeat="formatter in $$formatters" class=gale-cell y={{$index}}></gale-cell></gale-row></gale-body><gale-pagination ng-if="pagination && getTotalRows()>0"><div><span>{{from() | number:0}} - {{to() | number:0}} to {{getTotalRows() | number:0}}</span></div><div><md-icon ng-click=previousPage() ng-show=hasPrevious() md-svg-icon=hardware:keyboard_arrow_left></md-icon></div><div><md-icon ng-click=nextPage() ng-show=hasNext() md-svg-icon=hardware:keyboard_arrow_right></md-icon></div></gale-pagination>')}]),angular.manifiest("gale-material",["gale-material.templates","gale-material.components"],["gale","ngMaterial"]).config(["$mdThemingProvider",function($mdThemingProvider){setTimeout(function(){var toRGB=function(color){return color.value?(color=color.value,"rgb("+color[0]+","+color[1]+","+color[2]+")"):color},style=angular.element("<style></style>");document.head.appendChild(style[0]),stylesheet=style[0].sheet;var defaultTheme=function(){for(var name in $mdThemingProvider._THEMES)return name}(),palettes=["primary","accent","warn"];for(var i in palettes){var theme=palettes[i],palette=$mdThemingProvider._THEMES[defaultTheme].colors[theme].name,color=$mdThemingProvider._PALETTES[palette][500];stylesheet.insertRule(".md-"+theme+".text { color: "+toRGB(color)+" }",0),stylesheet.insertRule(".md-"+theme+".icon { fill: "+toRGB(color)+" }",0),stylesheet.insertRule(".md-"+theme+".background { background-color: "+toRGB(color)+" }",0)}},100)}]),angular.module("gale-material.components").directive("galeDatepicker",["$interpolate",function($interpolate){return{restrict:"E",require:["ngModel"],scope:{dateFormat:"@",ngModel:"=",ngChange:"&"},transclude:!0,templateUrl:"gale-datepicker/gale-datepicker.tpl.html",compile:function(){return{post:function(scope,element,attrs){attrs.$observe("disabled",function(val){""===val&&(val=!0),scope.disabled=val})}}},controller:["$scope","$element","$galeDatepickerDialog","$q",function($scope,$element,$galeDatepickerDialog){var blockFirstEntry=!0;$scope.data={displayValue:null};var focusedClass="md-input-focused";$scope.show=function(ev){if(!$scope.disabled){var inputContainer=$element.parent();inputContainer.addClass(focusedClass),$galeDatepickerDialog.show(ev,{selected:$scope.ngModel,classToAdd:$element.attr("class")}).then(function(data){data&&($scope.ngModel=data,blockFirstEntry=!1),inputContainer.removeClass(focusedClass)},function(){inputContainer.removeClass(focusedClass)})}},$scope.dateFormat||($scope.dateFormat="L");var displayValueFormat="{{ item | amDateFormat:'"+$scope.dateFormat+"' }}";$scope.$watch("ngModel",function(value){if(value){if(!angular.isDate(value))return void($scope.ngModel=moment(value).toDate());$scope.data.displayValue=$interpolate(displayValueFormat)({item:$scope.ngModel}),!blockFirstEntry&&$scope.ngChange&&$scope.ngChange()}else $element.parent().removeClass("md-input-has-placeholder")})}]}}]),function(){angular.module("gale-material.components").controller("GaleDatepickerDialogController",["$scope","$log","$timeout","$q","config","$mdDialog",function($scope,$log,$timeout,$q,config,$mdDialog){$scope.config=config,$scope.data={selected:null},$scope.data.selected=config.selected||new Date,$scope.nextMonth=function(date){$scope.data.selected=moment(date).add(1,"month").toDate()},$scope.previousMonth=function(date){$scope.data.selected=moment(date).subtract(1,"month").toDate()},$scope.today=function(){$scope.data.selected=new Date},$scope.save=function(date){$mdDialog.hide(date)},$scope.cancel=function(){$mdDialog.hide()}}]),angular.module("gale-material.components").provider("$galeDatepickerDialog",function(){this.$get=["$log","$q","$mdDialog",function($log,$q,$mdDialog){var self={};return self.show=function(ev,config){var deferred=$q.defer();return $mdDialog.show({controller:"GaleDatepickerDialogController",templateUrl:"gale-datepicker/gale-datepicker-dialog.tpl.html",targetEvent:ev,clickOutsideToClose:!0,focusOnOpen:!1,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self}]})}(),angular.module("gale-material.components").directive("galeFinder",function(){return{restrict:"E",scope:{onSearch:"=",onSelect:"=",placeholder:"@",minLength:"@",blockUi:"@"},templateUrl:"gale-finder/directives/galeFinder.tpl.html",controller:["$scope","$element","$log","$galeFinder","$window",function($scope,$element,$log,$galeFinder){var self={},minLength=$scope.minLength||3,onSearch=$scope.onSearch,onSelect=$scope.onSelect,blockUi=$scope.blockUi?"true"===$scope.blockUi?!0:!1:!0,body=angular.element(document.body),blocker=null;onSearch||$log.error("undefined 'onSearch' for finder component"),onSelect||$log.error("undefined 'onSelect' for finder component"),$scope.search=function(query){if($scope.activeIndex=0,query.length>=minLength){var promise=onSearch(query);angular.isArray(promise)?$scope.results=items:promise.then(function(items){$scope.results=items})}else $scope.results=[]},$scope.select=function(item){var ret=onSelect(item);ret&&self.hide()},$scope.close=function(){self.hide()},self.hide=function(){$element.removeClass("show"),$scope.query="",$scope.results=[],$scope.activeIndex=0,blocker&&blocker.remove()},self.show=function(){blockUi&&(blocker=angular.element('<md-backdrop class="md-sidenav-backdrop md-opaque ng-scope md-default-theme"></md-backdrop>'),body.append(blocker)),$element.addClass("show"),$element.find("input").focus()},$galeFinder.$$register(self),$scope.$on("$destroy",function(){$galeFinder.$$unregister()});var keys=[];keys.push({code:13,action:function(){if($scope.results.length>0&&$scope.activeIndex>=0){var item=$scope.results[$scope.activeIndex];$scope.select(item)}}}),keys.push({code:38,action:function(){$scope.activeIndex--}}),keys.push({code:40,action:function(){$scope.activeIndex++}}),keys.push({code:27,action:function(){self.hide()}}),$element.bind("keydown",function(event){keys.forEach(function(o){o.code===event.keyCode&&o.action()}),event.stopPropagation()})}],link:function(){}}}),angular.module("gale-material.components").factory("$galeFinder",["$q","$rootScope",function(){var self=this,_component=null,_get=function(){if(!_component)throw{message:"no finder has found"};return _component};return self.$$register=function(component){_component=component},self.$$unregister=function(){_component=null},self.show=function(){return _get().show()},self.hide=function(){return _get().hide()},self}]),angular.module("gale-material.components").directive("galeCenter",function(){return{restrict:"E",require:"^galeLoading",scope:{},controller:["$scope","$element","$log",function(){}],link:function(){}}}),angular.module("gale-material.components").directive("galeLoading",function(){return{restrict:"E",scope:{defaultMessage:"@"},templateUrl:"gale-loading/directives/galeLoading.tpl.html",controller:["$scope","$element","$log","$galeLoading",function($scope,$element,$log,$galeLoading){var self={},defaultMesasage=$scope.defaultMessage||"";self.hide=function(){$element.removeClass("show")},self.show=function(message){$element.addClass("show");var elm=$element.find("gale-text");elm.html(message?message:defaultMesasage)},$galeLoading.$$register(self),$scope.$on("$destroy",function(){$galeLoading.$$unregister()})}],link:function(scope,element){element.addClass("layout-row"),element.addClass("layout-align-center-center")}}}),angular.module("gale-material.components").factory("$galeLoading",["$q","$rootScope",function($q){var self=this,_component=null,deferred=$q.defer(),resolved=!1,_get=function(){if(!_component)throw{message:"no gale-loading has found"};return _component};return self.$$register=function(component){_component=component,resolved=!0,deferred.resolve()},self.$$unregister=function(){_component=null,resolved=!1,deferred=$q.defer()},self.show=function(message){return resolved?_get().show(message):void deferred.promise.then(function(){self.show(message)})},self.hide=function(){return _get().hide()},self}]),angular.module("gale-material.components").directive("galePage",function(){return{restrict:"E",scope:{title:"@",onKeydown:"="},controller:["$scope","$element","$attrs",function($scope){var $window=angular.element(window),onKeyDown=$scope.onKeydown;onKeyDown&&$window.on("keydown",function(event){onKeyDown(event,event.keyCode)}),$scope.$on("$destroy",function(){$window.off("keydown")})}],link:function(scope){scope.$emit("gale-page:title:changed",{title:scope.title||" "})}}}),angular.module("gale-material.components").directive("galeSelect",["$interpolate",function($interpolate){return{restrict:"E",require:["ngModel"],scope:{itemText:"@",ngModel:"=",items:"&",ngChange:"&"},transclude:!0,templateUrl:"gale-select/gale-select.tpl.html",compile:function(){return{post:function(scope,element,attrs){if(!angular.isDefined(attrs.items))throw{error:"ITEMS_NOT_DEFINED"};attrs.$observe("disabled",function(val){""===val&&(val=!0),scope.disabled=val});var templates=element.find("select-template");templates.html("<!--"+templates.html().trim()+"-->")}}},controller:["$scope","$element","$galeCollectionDialog","$q",function($scope,$element,$galeCollectionDialog){var blockFirstEntry=!0;$scope.data={placeholder:$scope.placeholder,displayValue:null};var focusedClass="md-input-focused";$scope.show=function(ev){if(!$scope.disabled){var inputContainer=$element.parent();inputContainer.addClass(focusedClass);var templateNode=$element.find("select-template"),html=null;templateNode.length>0&&(html=templateNode.html().substring(4),html=html.substring(0,html.length-4)),$galeCollectionDialog.show(ev,{collection:$scope.items,selected:$scope.ngModel,itemText:$scope.itemText,title:$scope.placeholder,classToAdd:$element.attr("class"),template:html}).then(function(data){data&&($scope.ngModel=data,blockFirstEntry=!1),inputContainer.removeClass(focusedClass)},function(){inputContainer.removeClass(focusedClass)})}};var parent=$element.parent();if(parent.length>0){var label=parent.find("label");$scope.placeholder=label.html()}else $scope.placeholder=$element.attr("placeholder");$scope.$watch("ngModel",function(value){value&&($scope.data.displayValue=$interpolate("{{"+$scope.itemText+"}}")({item:$scope.ngModel}),!blockFirstEntry&&$scope.ngChange&&$scope.ngChange())})}]}}]),function(){angular.module("gale-material.components").provider("$galeCollectionDialog",function(){this.$get=["$log","$q","$mdDialog",function($log,$q,$mdDialog){var self={};return self.show=function(ev,config){var deferred=$q.defer();return $mdDialog.show({controller:"GaleCollectionDialogController",templateUrl:"gale-select/gale-collection-dialog.tpl.html",targetEvent:ev,clickOutsideToClose:!0,focusOnOpen:!1,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self}]}),angular.module("gale-material.components").controller("GaleCollectionDialogController",["$scope","$log","$timeout","$q","config",function($scope,$log,$timeout,$q,config){$scope.config=config,$scope.data={selected:null};var defer=$q.defer();defer.promise.then(function(items){$scope.data.collection=items,config.selected&&($scope.data.selected=config.selected)});var collection=config.collection();if(collection&&angular.isArray(collection))var delay=$timeout(function(){defer.resolve(collection),$timeout.cancel(delay)},350);else{if(!collection||!collection.then)throw{error:"GALE_COLLECTION_DIALOG: ITEMS_MUST_BE_ARRAY_OR_PROMISE"};collection.then(function(collection){defer.resolve(collection)},function(err){$log.error(err),defer.reject()})}}])}(),angular.module("gale-material.components").directive("galeCollectionDialogItems",["$compile",function($compile){return{restrict:"E",template:"<md-list></md-list>",compile:function(){return{pre:function(scope,element){var config=scope.config,template=null;template=config.template?config.template:'<div class="md-list-item-text">{{'+config.itemText+"}}</div>";var fragment=["<md-list-item ng-click='select(item)' ng-repeat='item in data.collection'>",template,"</md-list-item>"].join("");element.find("md-list").append($compile(fragment)(scope))}}},controller:["$scope","$element","$compile","$mdDialog",function($scope,$element,$compile,$mdDialog){$scope.select=function(item){$mdDialog.hide(item)},$scope.cancel=function(){$mdDialog.hide(null)}}]}}]),angular.module("gale-material.components").directive("galeCell",function(){return{restrict:"E",require:"^galeRow",controller:["$scope","$element","$attrs","$interpolate","$compile",function($scope,$element,$attrs,$interpolate,$compile){var parentScope=$scope.$parent.$parent.$parent,newScope=parentScope.$new();newScope.item=$scope.item;var formatter=$scope.formatter,template="<div>"+formatter.template+"</div>",cell=$compile(template)(newScope);$element.append(cell),$element.addClass("flex"+(formatter.width?"-"+formatter.width:""));var cls=null;switch(formatter.align){case"left":cls="alignLeft";break;case"right":cls="alignRight";break;case"center":cls="alignCenter"}cls&&$element.addClass(cls)}],link:function(scope,element,attrs,ctrl){element.bind("click",function(ev){var $cell=angular.element(this),x=$cell.parent().attr("x"),y=$cell.attr("y");ctrl.getTableController().$$cellClick(ev,scope.item,y,x)})}}}),angular.module("gale-material.components").directive("galeColumn",["$compile",function($compile){return{restrict:"E",require:"^galeTable",scope:{title:"@",property:"@",width:"@",filterable:"=",filterableType:"=",align:"@"},transclude:!0,controller:["$scope","$element","$attrs",function(){}],link:function(scope,element,attrs,galeTable,$transclude){element.addClass("flex"+(scope.width?"-"+scope.width:"")),element.addClass("gale-column"),$transclude(scope,function(fragments){var header=_.find(fragments,function(elm){return"gale-header"===elm.nodeName.toLowerCase()});if(header){header=angular.element(header);var hscript=header.find("script");if(hscript.length>0)header=hscript;else{var htemplate=header.find("template");htemplate.length>0&&(header=htemplate)}header=$compile("<div class='header custom'>"+header.html()+"</div>")(scope.$parent)}else header=angular.element("<div class='header'>"+(scope.title||"")+"</div>");var cls=null;switch(scope.align){case"left":cls="alignLeft";break;case"right":cls="alignRight";break;case"center":cls="alignCenter"}if(cls&&header.addClass(cls),scope.filterable){var filter=angular.element("<filterable></filterable>");filter.append(header);var filterType="text",popup=$compile("<gale-filter-container><gale-"+filterType+"-filter/></gale-filter-container>")(scope);filter.append(popup),header=filter}element.append(header);var item=_.find(fragments,function(elm){return"gale-item"===elm.nodeName.toLowerCase()});if(item){item=angular.element(item);var script=item.find("script");if(script.length>0)item=script;else{var template=item.find("template");template.length>0&&(item=template)}}else{var html="";scope.property&&(html="{{item."+scope.property+"}}"),item=angular.element("<div>"+html+"</div>")}galeTable.$$formatters.push({property:scope.property,width:scope.width,align:scope.align,template:item.html()})})}}}]),angular.module("gale-material.components").directive("galeFilterContainer",function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"gale-table/galeFilterContainer.tpl.html",controller:["$scope","$element","$interpolate","$compile",function($scope){$scope.openMenu=function($mdOpenMenu,ev){originatorEv=ev,$mdOpenMenu(ev)}}],link:function(){}}}),angular.module("gale-material.components").directive("galeItem",function(){return{restrict:"E",require:"^galeTable",compile:function(){},controller:["$scope","$element","$attrs","$interpolate","$compile",function(){}]}}),angular.module("gale-material.components").directive("galeRow",["$compile","$interpolate",function(){return{restrict:"E",require:["^galeTable","galeRow"],controller:["$scope","$element","$attrs","$interpolate","$compile",function(){}],link:function(scope,element,attrs,ctrls){var galeTableController=ctrls[0],thisControler=ctrls[1];thisControler.getTableController=function(){return galeTableController}}}}]),angular.module("gale-material.components").directive("galeTable",function(){return{restrict:"E",scope:{pagination:"=",paginationSize:"@",items:"=?",endpoint:"@",showHeader:"@",rowClick:"&",cellClick:"&",name:"@"},transclude:!0,templateUrl:"gale-table/galeTable.tpl.html",controller:["$scope","$element","$Api","$galeTable","QueryableBuilder",function($scope,$element,$Api,$galeTable){this.$$formatters=$scope.$$formatters=[];var self=this,unique_id=$scope.name||(new Date).getTime(),configuration={},$$listeners={};self.$on=function(name,listener){"row-click"===name&&$element.addClass("row-click");var namedListeners=$$listeners[name];return namedListeners||($$listeners[name]=namedListeners=[]),namedListeners.push(listener),function(){namedListeners[indexOf(namedListeners,listener)]=null}},self.hasEventHandlersFor=function(name){return null!=$$listeners[name]},self.$fire=function(name,args){var listeners=$$listeners[name];listeners&&angular.forEach(listeners,function(listener){listener.apply(listener,args)})},self.getUniqueId=function(){return unique_id},self.setup=function(endpoint,cfg){$scope.items=[],configuration=cfg||{},pager=self.bind(endpoint)},self.refresh=function(){pager&&pager.refresh()},self.bind=function(endpoint){var totalRows=0,offset=0,limit=parseInt($scope.paginationSize||10),fetch=function(){$scope.items=[];var url=endpoint,data={};$scope.pagination&&(data={$offset:offset,$limit:limit}),$scope.isLoading=!0;var request=$Api.invoke("GET",url,data,configuration.headers);return request.success(function(data){totalRows=data.total,$scope.items=data.items,self.render(data,!0),self.$fire("load-complete",[data,unique_id])})["finally"](function(){$scope.isLoading=!1}),request};return fetch(),{nextPage:function(){return offset+=limit,fetch()},refresh:function(){return fetch()},previousPage:function(){return offset-=limit,fetch()},hasPrevious:function(){return offset>0},hasNext:function(){return totalRows>0&&totalRows>offset+limit},totalRows:function(){return totalRows},offset:function(){return offset},limit:function(){return limit}}},self.render=function(data,isRest){self.$fire("before-render",[data,unique_id]),$scope.source=isRest?data.items:data,isRest&&(data.total=data.items.length),0===$scope.source.length&&$element.find("gale-empty").css("display","block").append($element.find("gale-empty-data").css("display","block"))};$scope.cellClick();self.$$cellClick=function(ev,item,cellIndex,rowIndex){self.$fire("cell-click",[ev,item,{x:rowIndex,y:cellIndex},self.getUniqueId()])},$scope.$on("$destroy",function(){self.endpoint=null,$scope.source=null,$galeTable.$$unregister(self,unique_id)});var pager=null;$scope.getTotalRows=function(){return pager.totalRows()},$scope.nextPage=function(){pager.nextPage()},$scope.previousPage=function(){pager.previousPage()},$scope.from=function(){return pager.offset()+1},$scope.to=function(){var value=pager.offset()+pager.limit();return value>pager.totalRows()?pager.totalRows():value},$scope.hasNext=function(){return pager?pager.hasNext():!1},$scope.hasPrevious=function(){return pager?pager.hasPrevious():!1},$galeTable.$$register(self,unique_id)}],link:function(scope,element,attrs,ctrl){var rowClickHandler=scope.rowClick();scope.showHeader&&!scope.$eval(scope.showHeader)&&element.find("gale-header").css("display","none"),element.attr("layout-fill",""),element.addClass("gale-table"),scope.$watch("endpoint",function(value){value&&ctrl.bind(value)}),scope.$watch("items",function(value){value&&ctrl.render(value,!1)}),(rowClickHandler||ctrl.hasEventHandlersFor("row-click"))&&element.addClass("row-click"),element.find("gale-empty").css("display","none"),element.find("gale-empty-data").css("display","none"),scope.onRowClick=function(item){ctrl.$fire("row-click",[event,item,ctrl.getUniqueId()]),rowClickHandler&&rowClickHandler(item)}}}}),angular.module("gale-material.components").factory("$galeTable",["$q","$rootScope",function(){var self=this,components={},callbacks=[],$$register=function(component,uniqueID){components[uniqueID]=component,angular.forEach(callbacks,function(callback){callback(component,uniqueID)})},$$unregister=function(uniqueID){delete components[uniqueID],callbacks=[]},_getByHandle=function(uniqueID){var identifier=uniqueID;if(!identifier){var count=Object.keys(components).length;if(0===count)throw{message:"no galeTable has instantied in the view"};if(count>1)throw{message:"when you have more than 1 galetable in view, you must send the uniqueID"};identifier=function(){for(var id in components)return id}()}var component=components[identifier];if(!component)throw{message:"no galeTable has found with id {0}".format([identifier])};return component};return self.getRegisteredTables=function(){return components},self.endpoint=function(value,uniqueID){return _getByHandle(uniqueID).endpoint(value)},self.setup=function(endpoint,cfg,uniqueID){return _getByHandle(uniqueID).setup(endpoint,cfg)},self.refresh=function(uniqueID){return _getByHandle(uniqueID).refresh()},self.$on=function(eventName,callback,uniqueID){var component=_getByHandle(uniqueID);component.$on(eventName,callback)},self.then=function(callback){callbacks.push(callback)},self.$$register=$$register,self.$$unregister=$$unregister,self}]);
//# sourceMappingURL=angular-gale-material.min.js.map